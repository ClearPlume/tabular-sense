import random

from faker import Faker

# 日期时间格式变体列表
datetime_formats = [
    # 标准格式 - 横杠分隔
    "%Y-%m-%d %H:%M:%S",  # 2024-01-01 14:30:45
    "%Y-%m-%d %H:%M",  # 2024-01-01 14:30
    "%Y-%m-%d %H时%M分%S秒",  # 2024-01-01 14时30分45秒
    "%Y-%m-%d %H点%M分",  # 2024-01-01 14点30分

    # 标准格式 - 斜杠分隔
    "%Y/%m/%d %H:%M:%S",  # 2024/01/01 14:30:45
    "%Y/%m/%d %H:%M",  # 2024/01/01 14:30
    "%Y/%m/%d %H时%M分%S秒",  # 2024/01/01 14时30分45秒

    # 标准格式 - 点分隔
    "%Y.%m.%d %H:%M:%S",  # 2024.01.01 14:30:45
    "%Y.%m.%d %H:%M",  # 2024.01.01 14:30

    # 中文格式 - 完整
    "%Y年%m月%d日 %H:%M:%S",  # 2024年01月01日 14:30:45
    "%Y年%m月%d日 %H时%M分%S秒",  # 2024年01月01日 14时30分45秒
    "%Y年%m月%d日%H时%M分%S秒",  # 2024年01月01日14时30分45秒（无空格）
    "%Y年%m月%d日 %H时%M分",  # 2024年01月01日 14时30分
    "%Y年%m月%d日%H时%M分",  # 2024年01月01日14时30分
    "%Y年%m月%d日 %H点%M分%S秒",  # 2024年01月01日 14点30分45秒
    "%Y年%m月%d日%H点%M分%S秒",  # 2024年01月01日14点30分45秒
    "%Y年%m月%d日 %H点%M分",  # 2024年01月01日 14点30分
    "%Y年%m月%d日%H点%M分",  # 2024年01月01日14点30分

    # 中文格式 - 带时段，%p在前
    "%Y年%m月%d日 %p%I时%M分%S秒",  # 2024年01月01日 下午02时30分45秒
    "%Y年%m月%d日%p%I时%M分%S秒",  # 2024年01月01日下午02时30分45秒（无空格）
    "%Y年%m月%d日 %p %I时%M分%S秒",  # 2024年01月01日 下午 02时30分45秒（%p后有空格）
    "%Y年%m月%d日 %p%I时%M分",  # 2024年01月01日 下午02时30分
    "%Y年%m月%d日%p%I时%M分",  # 2024年01月01日下午02时30分
    "%Y年%m月%d日 %p %I时%M分",  # 2024年01月01日 下午 02时30分
    "%Y年%m月%d日 %p%I点%M分",  # 2024年01月01日 下午02点30分
    "%Y年%m月%d日%p%I点%M分",  # 2024年01月01日下午02点30分
    "%Y年%m月%d日 %p %I点%M分",  # 2024年01月01日 下午 02点30分

    # 中文格式 - 带时段，%p在后
    "%Y年%m月%d日 %I时%M分%S秒%p",  # 2024年01月01日 02时30分45秒下午
    "%Y年%m月%d日 %I时%M分%S秒 %p",  # 2024年01月01日 02时30分45秒 下午（%p前有空格）
    "%Y年%m月%d日 %I时%M分%p",  # 2024年01月01日 02时30分下午
    "%Y年%m月%d日 %I时%M分 %p",  # 2024年01月01日 02时30分 下午
    "%Y年%m月%d日 %I点%M分%p",  # 2024年01月01日 02点30分下午
    "%Y年%m月%d日 %I点%M分 %p",  # 2024年01月01日 02点30分 下午

    # ISO 8601格式
    "%Y-%m-%dT%H:%M:%S",  # 2024-01-01T14:30:45
    "%Y-%m-%dT%H:%M:%SZ",  # 2024-01-01T14:30:45Z
    "%Y-%m-%dT%H:%M:%S.%fZ",  # 2024-01-01T14:30:45.123456Z

    # 欧美格式 - 日/月/年
    "%d/%m/%Y %H:%M:%S",  # 01/01/2024 14:30:45
    "%d/%m/%Y %H:%M",  # 01/01/2024 14:30
    "%d-%m-%Y %H:%M:%S",  # 01-01-2024 14:30:45
    "%d.%m.%Y %H:%M:%S",  # 01.01.2024 14:30:45

    # 美式格式 - 月/日/年，24小时制
    "%m/%d/%Y %H:%M:%S",  # 01/01/2024 14:30:45
    "%m/%d/%Y %H:%M",  # 01/01/2024 14:30
    "%m-%d-%Y %H:%M:%S",  # 01-01-2024 14:30:45

    # 美式格式 - 月/日/年，12小时制
    "%m/%d/%Y %I:%M:%S %p",  # 01/01/2024 02:30:45 PM
    "%m/%d/%Y %I:%M:%S%p",  # 01/01/2024 02:30:45PM
    "%m/%d/%Y %I:%M %p",  # 01/01/2024 02:30 PM
    "%m/%d/%Y %I:%M%p",  # 01/01/2024 02:30PM

    # 英文月份格式
    "%b %d, %Y %H:%M:%S",  # Jan 01, 2024 14:30:45
    "%B %d, %Y %H:%M:%S",  # January 01, 2024 14:30:45
    "%d %b %Y %H:%M:%S",  # 01 Jan 2024 14:30:45
    "%d %B %Y %H:%M",  # 01 January 2024 14:30
    "%b %d, %Y %I:%M:%S %p",  # Jan 01, 2024 02:30:45 PM
    "%b %d, %Y %I:%M %p",  # Jan 01, 2024 02:30 PM

    # 紧凑格式
    "%Y%m%d%H%M%S",  # 20240101143045
    "%Y%m%d %H%M%S",  # 20240101 143045
    "%Y%m%d-%H%M%S",  # 20240101-143045

    # 不补零格式
    "%Y-%#m-%#d %#H:%#M:%#S",  # 2024-1-1 14:30:5
    "%Y年%#m月%#d日 %#H时%#M分",  # 2024年1月1日 14时30分
]


def datetime(num: int) -> list[str]:
    faker = Faker("zh_CN")
    datetime_format = random.choice(datetime_formats)
    samples = []

    # 85%使用格式化字符串，15%使用时间戳
    if random.random() < 0.85:
        for _ in range(num):
            sample = faker.date_time_between(start_date="-50y", end_date="now").strftime(datetime_format)
            samples.append(sample)
    else:
        # Unix时间戳（10位秒级或13位毫秒级）
        if random.random() < 0.7:
            for _ in range(num):
                sample = str(int(faker.date_time_between(start_date="-50y", end_date="now").timestamp()))
                samples.append(sample)
        else:
            for _ in range(num):
                ms = f"{random.randint(0, 999):03}"
                sample = str(int(faker.date_time_between(start_date="-50y", end_date="now").timestamp())) + ms
                samples.append(sample)

    return samples
